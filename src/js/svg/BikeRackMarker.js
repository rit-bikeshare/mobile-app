import React from 'react';
import PropTypes from 'prop-types';
import { Svg } from 'expo';
import { Text } from 'native-base';

const { G, Text: SvgText, Path, Circle } = Svg;

export default class BikeRackMarker extends React.Component {
  static propTypes = {
    availableBikes: PropTypes.node,
    useTiger: PropTypes.bool,
  };

  renderText(availableBikes) {
    if (availableBikes === null) return null;

    return (
      <SvgText textAnchor="middle" fill="#FFFFFF" fontSize="18" x="28" y="45">
        {availableBikes}
      </SvgText>
    );
  }

  renderSvg(availableBikes) {
    return (
      <Svg width="30" height="30" viewBox="0 0 56 56">
        <G id="BikeRackMarker">
          <Circle id="Oval" cx="28" cy="28" r="28" fill="#F36E1F" />
          <Path
            x="12"
            y="7"
            d="M13.3464305,3.48997135 L13.6009517,4.36259821 L21.7120711,4.33492516 C21.6062878,4.20613905 21.2205529,2.86718921 21.0218085,1.99335946 C20.8230642,1.11952972 21.5710267,0.51391568 21.5710267,0.51391568 C21.5710267,0.51391568 22.0657506,0.0243155794 23.4420016,0.000899922418 C24.8182527,-0.0225157346 25.2873321,0.41599566 25.6378059,0.735300071 C25.9882798,1.05460449 26.3611925,2.42974216 25.6880263,3.25674059 C25.01486,4.08373902 24.0093846,4.22316861 23.6578423,4.08373902 C23.3062998,3.94430943 23.3415609,3.61649023 23.3533146,3.35040322 C23.3650683,3.08431621 23.9377939,2.97788141 23.9377939,2.97788141 C23.9377939,2.97788141 24.4410659,2.90231269 24.744525,2.55214218 C25.047984,2.20197168 24.8962545,1.65489679 24.6504953,1.41009674 C24.4047363,1.16529669 23.376822,1.16316799 22.8265353,1.212128 C22.2762486,1.261088 22.1469579,1.62083764 22.1597801,1.89969684 C22.1726023,2.17855602 23.0145944,4.75321395 23.0145944,4.75321395 L23.9374252,7.26651333 C24.5727148,7.08003272 25.2453375,6.97994269 25.9414991,6.97994269 C29.8398015,6.97994269 33,10.1184394 33,13.9899713 C33,17.8615032 29.8398015,21 25.9414991,21 C22.0431967,21 18.8829982,17.8615032 18.8829982,13.9899713 C18.8829982,11.2226892 20.4975632,8.82991934 22.842183,7.69009783 L22.273043,6.09429248 L16.2893427,14.7421203 L14.076847,14.7421203 C13.6989949,18.2599622 10.7009456,21 7.05850091,21 C3.1601985,21 -7.61172643e-16,17.8615032 0,13.9899713 C3.80586322e-16,10.1184394 3.1601985,6.97994269 7.05850091,6.97994269 C8.3533773,6.97994269 9.56681644,7.32622258 10.6100518,7.93062533 L12.6286004,5.09912706 L12.1603511,3.48997135 L10.9461255,3.48997135 C10.5316286,3.48997135 10.1956124,3.15143233 10.1956124,2.73382329 L10.1956124,2.10601719 L14.3706729,2.10601719 C14.8304848,2.10660734 15.2029254,2.48232299 15.202925,2.94558753 L15.202925,3.48997135 L13.3464305,3.48997135 Z M11.5463397,8.57903475 C13.0131431,9.7803306 13.9831105,11.5584969 14.1041772,13.5638871 L15.082986,13.5638871 L13.0015131,6.58921435 L11.5463397,8.57903475 Z M9.83803951,9.01355754 C9.01253251,8.55709191 8.06180981,8.29704934 7.04993087,8.29704934 C3.87993477,8.29704934 1.31014519,10.8491916 1.31014519,13.9974186 C1.31014519,17.1456457 3.87993477,19.697788 7.04993087,19.697788 L7.04885961,19.6967241 C8.57114544,19.6970063 10.0311953,19.096704 11.1078148,18.0278769 C12.0061037,17.1360897 12.5760697,15.9790859 12.7404066,14.7421203 L7.99321101,14.7421203 C7.76120237,15.0353083 7.40172131,15.2234957 6.99817185,15.2234957 C6.29847653,15.2234957 5.73126143,14.6577581 5.73126143,13.9598854 C5.73126143,13.2620127 6.29847653,12.6962751 6.99817185,12.6962751 C7.0665654,12.6962751 7.13438879,12.7017909 7.20104414,12.7125756 L9.83803951,9.01355754 Z M10.7629426,9.65026057 L8.08552263,13.3113946 C8.13332527,13.3911351 8.17212495,13.4758272 8.20126383,13.5638871 L12.7733651,13.5638871 C12.6547837,11.9978453 11.899078,10.6083259 10.7629426,9.65026057 Z M23.2870637,8.93749386 C21.4486499,9.88758958 20.1931434,11.7968913 20.1931434,13.9974186 C20.1931434,17.1456457 22.7629329,19.697788 25.932929,19.697788 L25.928644,19.6967241 C27.4514865,19.6978532 28.9123622,19.0979248 29.9896769,18.0290059 C31.0669916,16.960087 31.6724309,15.5098039 31.6727147,13.9974186 C31.6727147,10.8491916 29.1029251,8.29704934 25.932929,8.29704934 C25.3991657,8.29704934 24.8824193,8.36940703 24.3920924,8.50478452 L25.931135,12.6963164 C25.9345864,12.6962889 25.9380411,12.6962751 25.9414991,12.6962751 C26.2775046,12.6962751 26.5997482,12.8294051 26.83734,13.066378 C27.0749318,13.3033509 27.2084095,13.6247551 27.2084095,13.9598854 C27.2084095,14.6577581 26.6411944,15.2234957 25.9414991,15.2234957 C25.2418038,15.2234957 24.6745887,14.6577581 24.6745887,13.9598854 C24.6745887,13.7258282 24.7383914,13.5066342 24.8495962,13.3186612 L23.2870637,8.93749386 Z M6.99817185,14.6176842 L6.99498062,14.6166233 C7.17026341,14.6174694 7.33867351,14.5486852 7.46301715,14.4254617 C7.58736078,14.3022383 7.65740796,14.1347134 7.65768861,13.9598854 C7.65768861,13.6938306 7.4970025,13.4539733 7.25055796,13.3521585 C7.00411348,13.2503438 6.72044354,13.3066223 6.53182309,13.4947514 C6.34320263,13.6828805 6.28677715,13.9658115 6.3888578,14.2116141 C6.4909385,14.4574167 6.73142223,14.6176842 6.99817185,14.6176842 Z M25.9414991,14.6176842 L25.9383079,14.6166233 C26.1135906,14.6174694 26.2820007,14.5486852 26.4063444,14.4254617 C26.530688,14.3022383 26.6007352,14.1347134 26.6010159,13.9598854 C26.6010159,13.6938306 26.4403297,13.4539733 26.1938852,13.3521585 C25.9474407,13.2503438 25.6637708,13.3066223 25.4751503,13.4947514 C25.2865299,13.6828805 25.2301044,13.9658115 25.332185,14.2116141 C25.4342657,14.4574167 25.6747495,14.6176842 25.9414991,14.6176842 Z M21.1755027,5.53581662 L13.9360146,5.53581662 L16.0877157,12.9369628 L21.1755027,5.53581662 Z"
            fill="#FFFFFF"
            fillRule="nonzero"
          />
          {this.renderText(availableBikes)}
        </G>
      </Svg>
    );
  }

  renderTiger() {
    const { availableBikes } = this.props;
    return (
      <Text style={{ position: 'absolute', left: 7, top: 5 }}>
        {availableBikes}
      </Text>
    );
  }

  render() {
    const { availableBikes, useTiger } = this.props;
    if (useTiger) {
      return this.renderTiger();
    }
    return this.renderSvg(availableBikes);
  }
}
