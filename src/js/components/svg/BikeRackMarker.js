import React from 'react';
import PropTypes from 'prop-types';
import { Svg } from 'Expo';
import { Text } from 'native-base';

const { G, Text: SvgText, Path, Circle } = Svg;

export default class BikeRackMarker extends React.Component {
  static propTypes = {
    availableBikes: PropTypes.node,
    useTiger: PropTypes.bool
  };

  renderText(availableBikes) {
    if (availableBikes === null) return null;

    return (
      <SvgText textAnchor="middle" fill="#FFFFFF" fontSize="18" x="28" y="30">
        {availableBikes}
      </SvgText>
    );
  }

  renderSvg(availableBikes) {
    return (
      <Svg width="30" height="30" viewBox="0 0 56 56">
        <G id="BikeRackMarker">
          <Circle id="Oval" cx="28" cy="28" r="28" fill="#F36E1F" />
          <Path
            d="M35.9543352,5.95894292 C34.5841702,6.52273936 34.3809241,6.64770076 34.3026395,6.96892506 C34.2868356,7.05492791 34.5452116,7.95538506 34.8818723,8.97308541 L35.5004313,10.8129583 L32.0636252,15.1024421 C30.1689899,17.4586996 28.5955788,19.3691389 28.5720567,19.3456167 C28.5485345,19.3143764 27.4995938,17.0128814 26.2470396,14.2258746 L23.9690667,9.16089504 L24.36049,9.1450911 C25.0102892,9.10613254 25.2609471,9.04328431 25.4252346,8.87091108 C25.6600885,8.61253501 25.6365664,8.16634931 25.3704721,7.86901468 C25.1668585,7.6576829 24.9555267,7.58711646 22.93593,7.08616826 C20.6186311,6.50693541 20.52491,6.49884968 20.3367329,6.85131433 C20.2977743,6.92959897 20.2584482,7.36806648 20.2584482,7.82197039 C20.2584482,8.57357646 20.2742522,8.6595793 20.4462579,8.86319288 C20.6340675,9.07452466 20.6575896,9.08224286 21.565765,9.10576501 L22.4893767,9.13700536 L23.2880271,10.9063118 L24.0785917,12.6756182 L23.3034635,13.5055089 C22.8808,13.9594128 22.2074785,14.6720603 21.8083371,15.1024421 L21.0802532,15.8694846 L20.6495039,15.5798682 C18.332205,14.0141753 15.2478636,14.0689378 13.0165675,15.7129153 C10.3787794,17.6623131 9.50993011,21.1303595 10.9344901,24.034977 C12.0852376,26.3757981 14.3242518,27.7613995 16.9311672,27.7613995 C20.4227357,27.7691177 23.2332646,25.1857245 23.5853617,21.6629156 L23.6401242,21.0991192 L26.2235174,21.0991192 C27.7186438,21.0991192 28.8616731,21.0678788 28.9399577,21.0208345 C29.0182424,20.9815085 30.6232613,19.0243924 32.5098109,16.6758531 C34.3963605,14.3273139 35.9620534,12.4091564 35.9936613,12.4091564 C36.0484238,12.4091564 36.8937509,14.9848314 36.8470741,15.0160717 C36.8312702,15.0318757 36.5574577,15.1961631 36.2362334,15.3762546 C35.5551938,15.775396 34.6080599,16.652331 34.1773106,17.2863263 C33.7465613,17.9203217 33.3632238,18.7579306 33.1673284,19.4941003 C32.971433,20.2376206 32.9324745,21.7253963 33.0890438,22.4689167 C33.5587516,24.6373645 35.1869252,26.5632402 37.1991713,27.3225645 C38.0680205,27.651507 38.7020159,27.7687502 39.6337134,27.7687502 C40.9957926,27.7687502 42.1623441,27.4320895 43.219003,26.7433316 C44.6593669,25.7961977 45.559824,24.5903202 46.0684904,22.9228206 C46.2485818,22.3123474 46.272104,22.1006481 46.272104,21.1380777 C46.272104,19.8542831 46.1236204,19.1809617 45.6223047,18.1632613 C44.753823,16.4020407 43.2035665,15.1572046 41.2310141,14.625016 C40.7300659,14.4919689 39.164373,14.4372064 38.4675295,14.5232093 L38.1543909,14.5625353 L36.9959252,11.078685 C36.3619299,9.16052751 35.8374595,7.55587611 35.8374595,7.51655002 C35.8374595,7.46950573 36.2836452,7.25817395 36.8316377,7.04684217 C37.3796302,6.82779219 37.9199045,6.56941611 38.0452334,6.47532753 C38.3113277,6.24819181 38.3425681,5.87257254 38.0999959,5.56715218 C37.8489705,5.2462954 37.535832,5.30142543 35.9543352,5.95894292 Z M25.9651414,16.8563121 C26.6538992,18.3984828 27.2254138,19.6903632 27.2254138,19.7138853 C27.2254138,19.7451257 26.3800867,19.7686478 25.3465824,19.7686478 L23.4754692,19.7686478 L23.3894664,19.4319871 C23.1858528,18.6491407 22.8179517,17.8662943 22.3092853,17.1617325 L22.043191,16.7934639 L23.0450874,15.7364374 C23.6007981,15.1491189 24.1803985,14.5386457 24.3288821,14.3662724 C24.4773656,14.1938992 24.6184985,14.0531339 24.6497388,14.0531339 C24.6736285,14.0535014 25.2686653,15.3137739 25.9651414,16.8563121 Z M18.6299071,16.0653799 C19.3032286,16.3002339 20.1331193,16.7545053 20.086075,16.8717485 C20.070271,16.9029889 19.3973172,17.6468767 18.5751446,18.515726 C17.7610579,19.3845753 17.0642143,20.1674217 17.0252557,20.2537921 C16.9469711,20.4574056 17.0252557,20.6999778 17.2288693,20.9190278 C17.3854386,21.0991192 17.4012425,21.0991192 19.8435029,21.0991192 L22.3015671,21.0991192 L22.2545228,21.5453049 C22.0196689,23.5494652 20.9472061,25.0916359 19.2014218,25.9215266 C18.3167686,26.3441902 17.78458,26.445997 16.6963132,26.4070384 C15.8976629,26.3757981 15.6628089,26.336472 15.1229022,26.1328584 C13.5178833,25.5301034 12.3594176,24.3323117 11.827229,22.7041381 C11.6548558,22.1796678 11.6236154,21.9290099 11.6236154,21.1774038 C11.6155297,19.5257081 12.1322819,18.3201982 13.3223554,17.2084092 C14.402904,16.1984271 15.5848918,15.7599596 17.1270625,15.8070039 C17.7922982,15.830526 18.0819146,15.8775703 18.6299071,16.0653799 Z M41.1997737,16.0106175 C42.0844269,16.2847975 42.6949001,16.6681349 43.4310698,17.4120228 C44.5266873,18.515726 44.9574366,19.5881888 44.9493508,21.1774038 C44.9416326,21.9209242 44.9023065,22.187386 44.738019,22.7041381 C44.2058305,24.3323117 43.0469973,25.5301034 41.4423459,26.1328584 C40.9020716,26.336472 40.6672176,26.3754306 39.8689348,26.4070384 C38.780668,26.4463645 38.2484795,26.3445577 37.3638263,25.9215266 C35.9153766,25.2327688 34.8745217,23.9802145 34.4595763,22.4299581 C34.2872031,21.7643549 34.2794849,20.5276045 34.4518581,19.8465649 C34.7808006,18.5862924 35.6573681,17.3414564 36.7221127,16.6446128 C36.9962927,16.4722396 37.2388649,16.323756 37.262387,16.323756 C37.2936274,16.323756 37.6850506,17.4590671 38.1470402,18.8446685 C38.8593202,20.9976799 39.0158895,21.4045396 39.2195031,21.5923492 C39.4153984,21.7801588 39.5014013,21.8113992 39.6969291,21.7724406 C40.0023495,21.7099599 40.1978773,21.5298685 40.2530074,21.2634067 C40.2842477,21.1226413 40.0258716,20.2379881 39.4466388,18.4763999 L38.5935935,15.8930067 L38.797207,15.8382442 C39.2110498,15.7287192 40.6282591,15.830526 41.1997737,16.0106175 Z M21.7146161,18.789906 C21.9024257,19.1813292 22.058995,19.5650342 22.058995,19.6352331 C22.058995,19.7524763 21.9259478,19.7682803 20.6421532,19.7682803 L19.2253115,19.7682803 L20.1408375,18.789906 C21.2213861,17.6391585 21.1508196,17.6391585 21.7146161,18.789906 Z"
            id="Frame"
            fill="#FFFFFF"
            fillRule="nonzero"
          />
          {this.renderText(availableBikes)}
        </G>
      </Svg>
    );
  }

  renderTiger() {
    const { availableBikes } = this.props;
    return <Text style={{ position: 'absolute', left: 7, top: 5 }}>{availableBikes}</Text>;
  }

  render() {
    const { availableBikes, useTiger } = this.props;
    if (useTiger) {
      return this.renderTiger();
    }
    return this.renderSvg(availableBikes);
  }
}
